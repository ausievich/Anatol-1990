<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <!-- src="script4.js" -->
    <script > 
        
document.addEventListener("DOMContentLoaded", waitForStart);

function waitForStart(){
    let timerId = setInterval(fillTheFieldWithIcons, 500);
    document.querySelector(".field").addEventListener('click', function start(){
        
        if (timerId) {
            clearInterval(timerId);
        } 

        document.querySelector(".field").removeEventListener('click', start);
        play();
    });
    
}


function fillTheFieldWithIcons() {
    let elements = document.querySelectorAll(".icon");
    const symbols = ['üíÄ', 'üéÉ', '‚òÇÔ∏è', 'üëÅ', '‚≠êÔ∏è','ü•ù','üöÄ','üç™'];  

    let random = [];
    
    while (random.length < 16) {
        index = Math.floor(Math.random() * 8);
        symbol = symbols[index];

        if (random.filter(function(el){ return el == symbol }).length < 2) {
            random.push(symbol);
        }    
    }
    

    elements.forEach(function(el, index){

        el.style.opacity = 100;
        el.innerText = random[index];
        
    });

    random = [];

}


function play() {

    fillTheFieldWithIcons();


    let elements = document.querySelectorAll(".icon");

    elements.forEach(function(el, index){
        if (el.classList.contains('open')) {
            el.classList.remove('open');
        }
        el.style.opacity = 0;        
    });


    // –ö–æ–≥–¥–∞ –Ω–∞–∂–∏–º–∞—é –Ω–∞ –ª—é–±–æ–π –∏–∑ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–æ–≤, –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã, –∞ –ø–æ—Ç–æ–º —Å–Ω–æ–≤–∞ –∏—Å—á–µ–∑–∞–µ—Ç
    let previousEl = "";
    let counter = 0;

    document.addEventListener('click', function gamePlay(e){
        
        if (e.target.tagName == 'SPAN' && !e.target.classList.contains('open')) {
            e.target.style.opacity = 100;
            
            if (previousEl == "") {
                previousEl = e.target;                    
            } else {
                if (previousEl.innerText == e.target.innerText && previousEl != e.target) {
                    e.target.style.opacity = 100;
                    e.target.classList.add('open');
                    previousEl.classList.add('open');
                    counter += 2;
                    previousEl = '';

                    if (counter == 16) {
                        document.removeEventListener('click', gamePlay);
                        
                        waitForStart();
                        return;
                    }

                } else {
                    document.removeEventListener('click', gamePlay);
                    
                    setTimeout(function(){
                        previousEl.style.opacity = 0;
                        e.target.style.opacity = 0;
                        previousEl = '';       
                        document.addEventListener('click', gamePlay);
                    }, 500);
                    
                }
            }
            
        }
    });
}









    </script>
    <style>
        .icon {
            display: inline-block;
            padding-top: 7px;
            width: 100%;
            opacity: 0;
            
        }

        .box {
            
            font-size: 50px;
            text-align: center;

            height: 100px;
            width: 100px;
            background-color: chocolate;
            box-sizing: border-box;
            border: 2px solid white;
            border-radius: 4px;
        }

        .field {
            min-width: 400px;
            max-width: 400px;
            font-size: 0;
        }

        .message {
            min-height: 400px;
        }
    </style>

    <title>Memory.</title>
   
  </head>
  <body>
    
    <div class="container">
        <div class=" mt-3 mb-4 d-flex justify-content-center">
            <h1>Memory.</h1>
            
        </div>
       
        <div class="row">
            <div class="col d-flex justify-content-center">
                <div class="field">
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
                    <div class="box d-inline-block">
                        <span class="icon"></span>
                    </div>
    
                </div>

            </div>
           
            
        </div>
        <!--
        <div class="row pt-4 pb-3">
            <div class="col d-flex justify-content-center align-items-center">
               by Anatoly Usievich. ¬©
            </div>
        </div>
        -->
        

    </div>




    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

   
  </body>
</html>